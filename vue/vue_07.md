# vue_07

## State Management(상태 관리)
* Vue 컴포넌트는 이미 반응형 상태를 관리하고 있음
* 상태 === 데이터

---

## 컴포넌트 구조의 단순화
1. 상태(state)
* 앱 구동에 필요한 기본 데이터
2. 뷰(View)
* 상태를 선언적으로 매핑하여 시각화
3. 기능(Actions)
* 뷰에서 사용자 입력에 대해 반응적으로 상태를 변경할 수 있게 정의된 동작

---

## 상태 관리의 단순성이 무너지는 시점
1. 여러 뷰가 동일한 상태에 종속되는 경우
* 공유 상태를 공통 조상 컴포넌트로 '끌어올린' 다음 props로 전달하는 것
* 단점: 계층 구조가 깊어질 경우 비효율적, 관리가 어려워짐
2. 서로 다른 뷰의 기능이 동일한 상태를 변경시켜야 하는 경우
* 발신(emit)된 이벤트를 통해 상태의 여러 복사본을 변경 및 동기화하는 것
* 단점: 관리의 패턴이 깨지기 쉽고, 유지 및 관리할 수 없는 코드가 됨

---

## 해결책
* 컴포넌트 트리는 하나의 큰 view가 되고, 모든 컴포넌트는 트리 계층 구조에 관계 없이 상태에 접근하거나 기능을 사용할 수 있음

---

## Pinia
* Vue 공식 상태 관리 라이브러리

---

## store
* 중앙 저장소
* 모든 컴포넌트가 공유하는 상태, 기능 등이 작성됨
* defineStore()의 반환 값의 이름은 use와 store를 사용하는 것을 권장
* defineStore()의 첫번째 인자는 애플리케이션 전체에 걸쳐 사용하는 store의 고유 ID

---

 ## state
 * 반응형 상태(데이터)
 * ref() === state
 * 각 컴포넌트 깊이에 관계 없이 store 인스턴스로 state에 접근하여 직접 읽고 쓸 수 있음
 * 만약 store에 state를 정의하지 않았다면 컴포넌트에서 새로 추가할 수 없음

 ---

 ## getters
 * 계산된 값
 * computed() === getters
 * store의 모든 getters 또한 state처럼 직접 접근할 수 있음

 ---

 ## actions
 * 메서드
 * fuction() === actions
 * store의 모든 actions 또한 직접 접근 및 호출할 수 있음
 * getters와 달리 state 조작, 비동기, API 호출이나 다른 로직을 진행할 수 있음

---

## setup stores의 반환 값
* pinia의 상태들을 사용하려면 반드시 반환 필요
* store에서는 공유 하지 않는 private한 상태 속성을 가지지 않음

---

## plugin
* 애플리케이션의 상태 관리에 필요한 추가 기능을 제공하거나 확장하는 도구나 모듈
* 애플리케이션의 상태 관리를 더욱 간편하고 유연하게 만들어주며 패키지 매니저로 설치 이후 별도 설정을 통해 추가됨

---

## Local Storage
* 브라우저 내에 key-value 쌍을 저장하는 웹 스토리지 객체

---

## Local Storage 특징
* 페이지를 새로 고침하고 브라우저를 다시 실행해도 데이터가 유지
* 쿠키와 다르게 네트워크 요청 시 서버로 전송되지 않음
* 여러 탭이나 창 간에 데이터를 공유할 수 있음

---

## Local Storage 사용 목적
* 웹 애플리케이션에서 사용자 설정, 상태 정보, 캐시 데이터 등을 클라이언트 측에서 보관하여 웹 사이트의 성능을 향상시키고 사용자 경험을 개선하기 위함

---

## pinia-plugin-persistedstate
* 웹 애플리케이션의 상태(state)를 브라우저의 local storage나 session storage에 영구적으로 저장하고 복원하는 기능을 제공

---

## 이제 모든 데이터를 store에서 관리해야할까?
* pinia를 사용한다고 해서 모든 데이터를 state에 넣어야하는 건 아님
* pass props, emit event를 함께 사용하여 애플리케이션을 구성해야함
* 상황에 따라 적절하게 사용하는 것이 필요

---

## 보충 수업

---

## 객체
 * '상태와 행동'의 집합
 ```
const obj = {
    age: 5,
    newAge: () => { obj.age++ }
}
=> newAge: 메서드
=> 메서드란? 객체 안에 함수 / 객체의 프로퍼티 밸류가 함수이고, 객체 내의 '상태'를 변화시키는 함수

const obj2 = {
    age: 5,
    sayHello: () => { console.log(this.age) }
}
```